<html>
  <head>
    <title>3D iframe | BrilliantSole JavaScript SDK</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <!-- <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script> -->
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <!-- required to get aframe-orbit-controls-component to work -->
    <script>
      THREE.Quaternion.prototype.inverse = THREE.Quaternion.prototype.invert;
      THREE.Math = THREE.MathUtils;
    </script>
    <!-- https://github.com/tizzle/aframe-orbit-controls-component -->
    <script src="https://cdn.rawgit.com/tizzle/aframe-orbit-controls-component/v0.1.14/dist/aframe-orbit-controls-component.min.js"></script>
    <!-- https://github.com/c-frame/aframe-physics-system/blob/master/CannonDriver.md#installation -->
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-physics-system@v4.2.2/dist/aframe-physics-system.min.js"></script>
  </head>

  <style>
    body {
      margin: 0;
    }
  </style>

  <body>
    <a-scene
      physics="debug: false"
      embedded
      xr-mode-ui="enabled: false;"
      device-orientation-permission-ui="enabled: false"
      renderer="colorManagement: true;"
    >
      <a-assets>
        <a-asset-item id="rightHand" src="../../assets/3d/rightHand.glb"></a-asset-item>
      </a-assets>
      <a-light type="directional" position="2 2 -2" target=".target"></a-light>
      <a-light type="directional" position="-2 2 2" target=".target"></a-light>
      <a-light type="directional" position="2 -2 2" target=".target"></a-light>

      <a-camera
        class="camera"
        camera="fov: 50; zoom: 3.2; active: true; "
        position="0 1 0"
        orbit-controls="
          enableZoom: true;
          autoRotate: false;
          enabled: true;
          target: .target;
          enableDamping: true;
          dampingFactor: 0.125;
          rotateSpeed:0.25;
          minDistance:0.75;
          maxDistance:2;
        "
      ></a-camera>

      <a-sky></a-sky>

      <a-camera
        class="cursorCamera"
        camera="fov: 50; zoom: 3.2; active: false;"
        look-controls="enabled: false"
        position="0 0 0"
        wasd-controls-enabled="false"
      ></a-camera>
      <a-entity class="cursorExample" visible="false">
        <a-entity class="cursor" position="0 0 -1">
          <a-cylinder
            class="mesh"
            material="shader: flat;"
            color="lightGrey"
            scale="1 1 1"
            radius="0.003"
            height="0.001"
            rotation="90 0 0"
          ></a-cylinder>
        </a-entity>
        <a-box color="lightblue" dynamic-body data-color="lightblue" position="0 1 -20" class="intersectable"></a-box>
        <a-sphere
          class="cursorHandle"
          radius="0.1"
          visible="false"
          position="1 1 -20"
          static-body
          color="red"
        ></a-sphere>
        <a-plane static-body rotation="-90 0 0" width="100" height="100" position="0 -1 0" color="lightgrey"></a-plane>
      </a-entity>

      <a-entity class="target" visible="false">
        <a-entity class="rotation">
          <a-entity class="position" position="0 0 0">
            <a-entity class="glove" gltf-model="#rightHand" visible="true" scale="0.05 0.05 0.05"></a-entity>
            <a-entity data-pressure="5" position="-0.02739 0.00949 -0.04775" visible="false">
              <a-sphere color="red" radius="0.007"></a-sphere>
            </a-entity>
            <a-entity data-pressure="2" position="-0.00608 0.0113 -0.04775">
              <a-sphere color="red" radius="0.007"></a-sphere>
            </a-entity>
            <a-entity data-pressure="0" position="0.01241 0.00847 -0.04775">
              <a-sphere color="red" radius="0.007"></a-sphere>
            </a-entity>
            <a-entity data-pressure="3" position="0.03039 0.0069 -0.03797">
              <a-sphere color="red" radius="0.007"></a-sphere>
            </a-entity>
            <a-entity data-pressure="4" position="-0.02686 -0.00286 -0.04734">
              <a-sphere color="red" radius="0.007"></a-sphere>
            </a-entity>
            <a-entity data-pressure="7" position="0.01145 -0.00286 -0.04734">
              <a-sphere color="red" radius="0.007"></a-sphere>
            </a-entity>
            <a-entity data-pressure="6" position="-0.0447 -0.01594 -0.01474">
              <a-sphere color="red" radius="0.007"></a-sphere>
            </a-entity>
            <a-entity data-pressure="1" position="0.00673 -0.00835 -0.00116">
              <a-sphere color="red" radius="0.007"></a-sphere>
            </a-entity>
          </a-entity>
        </a-entity>
      </a-entity>
    </a-scene>
  </body>
</html>
