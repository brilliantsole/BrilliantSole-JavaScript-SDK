<html>
    <head>
        <title>3D | BrilliantSole JavaScript SDK</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
        <!-- required to get aframe-orbit-controls-component to work -->
        <script>
            THREE.Quaternion.prototype.inverse = THREE.Quaternion.prototype.invert;
            THREE.Math = THREE.MathUtils;
        </script>
        <!-- https://github.com/tizzle/aframe-orbit-controls-component -->
        <script src="https://cdn.rawgit.com/tizzle/aframe-orbit-controls-component/v0.1.14/dist/aframe-orbit-controls-component.min.js"></script>
        <script type="module" src="./script.js"></script>
    </head>

    <style>
        #insoles {
            display: flex;
            flex-direction: row;
            height: 500px;
        }
        .insole {
            position: relative;
            height: 100%;
        }

        a-scene {
            width: 350px;
            height: 350px;
            margin: auto;
            border-radius: 40px;
            overflow: hidden;
            border: solid black;
        }
    </style>

    <body>
        <nav>
            <a href="../../">home</a>
        </nav>

        <h1>3D | BrilliantSole JavaScript SDK</h1>

        <div id="insoles"></div>

        <template id="insoleTemplate">
            <div class="insole">
                <p>
                    <button class="toggleConnection">connect</button>
                    <br />
                    <select class="orientation" disabled>
                        <optgroup label="orientation">
                            <option value="none">no orientation</option>
                            <option>gameRotation</option>
                            <option disabled>rotation</option>
                            <option>gyroscope</option>
                        </optgroup>
                    </select>
                    <button disabled class="resetOrientation">reset orientation</button>
                    <br />
                    <select class="position" disabled>
                        <optgroup label="position">
                            <option value="none">no position</option>
                            <option>acceleration</option>
                            <option>gravity</option>
                            <option>linearAcceleration</option>
                        </optgroup>
                    </select>
                </p>
                <a-scene
                    embedded
                    xr-mode-ui="enabled: false;"
                    device-orientation-permission-ui="enabled: false"
                    renderer="colorManagement: true;"
                >
                    <a-light type="directional" position="2 2 -2" target=".target"></a-light>
                    <a-light type="directional" position="-2 2 2" target=".target"></a-light>
                    <a-light type="directional" position="2 -2 2" target=".target"></a-light>

                    <a-camera
                        class="camera"
                        camera="fov: 50; zoom: 2;"
                        position="0 1 0"
                        orbit-controls="
                            enableZoom: true;
                            autoRotate: false;
                            target: .target;
                            enableDamping: true;
                            dampingFactor: 0.125;
                            rotateSpeed:0.25;
                            minDistance:0.75;
                            maxDistance:2;
                        "
                    ></a-camera>

                    <a-entity class="target">
                        <a-entity class="targetPositionOffset">
                            <a-entity class="targetRotationOffset">
                                <a-entity
                                    class="insole"
                                    gltf-model="../../assets/3d/leftInsole.glb"
                                    visible="true"
                                ></a-entity>
                            </a-entity>
                        </a-entity>
                    </a-entity>
                </a-scene>
            </div>
        </template>
    </body>
</html>
